(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]||[]).push([["685af5c1"],{"39f04ce0":function(e,s,a){a.d(s,"__esModule",{value:!0}),a.e(s,{default:function(){return N;}});var t=a("777fffbe"),r=a("852bbaa9"),d=a("452b4f57"),c=a("8946f00a"),n=r._(c),l=a("2871fbcf"),o=t._(l),u=a("9f383c56"),i=t._(u),m=a("3c2c85c4"),f=t._(m),h=a("0c02d634"),p=t._(h),g=a("d800230b"),x=t._(g),y=a("0e3da803"),w=t._(y),j=a("62f61479"),b=t._(j),T=a("92c451dd"),k=t._(T),_=a("d3c8d289"),v=t._(_),S=a("522048d4"),C=t._(S),I=a("8437ad0c"),q=a("27794ade");async function F(e){try{let s=await (0,q.request)("/api/admin/list",{method:"GET",headers:{accept:"*/*"},params:{username:null==e?void 0:e.username,page:(null==e?void 0:e.current)?e.current-1:0,size:(null==e?void 0:e.pageSize)||10}});if(!s.success&&200!==s.code)return{success:!1,code:s.code,message:s.message||"\u83B7\u53D6\u7BA1\u7406\u5458\u5217\u8868\u5931\u8D25"};{let e=s.data.content.map(e=>({id:e.id.toString(),username:e.username}));return{success:!0,data:e,total:s.data.totalElements};}}catch(e){return console.error("\u83B7\u53D6\u7BA1\u7406\u5458\u5217\u8868\u5931\u8D25:",e),{success:!1,message:"\u83B7\u53D6\u7BA1\u7406\u5458\u5217\u8868\u5931\u8D25"};}}async function P(e){try{let s=await (0,q.request)("/api/admin/create",{method:"POST",headers:{accept:"*/*","Content-Type":"application/json"},data:{username:e.username,passwd:e.passwd}});if(s.success||200===s.code)return{success:!0,data:s.data};return{success:!1,code:s.code,message:s.message||"\u521B\u5EFA\u7BA1\u7406\u5458\u5931\u8D25"};}catch(e){return console.error("\u521B\u5EFA\u7BA1\u7406\u5458\u5931\u8D25:",e),{success:!1,message:"\u521B\u5EFA\u7BA1\u7406\u5458\u5931\u8D25"};}}async function z(e,s){try{let a=await (0,q.request)("/api/admin/update",{method:"POST",headers:{accept:"*/*","Content-Type":"application/json"},data:{id:parseInt(e),passwd:s.passwd}});if(a.success||200===a.code)return{success:!0,data:a.data};return{success:!1,code:a.code,message:a.message||"\u66F4\u65B0\u7BA1\u7406\u5458\u5BC6\u7801\u5931\u8D25"};}catch(e){return console.error("\u66F4\u65B0\u7BA1\u7406\u5458\u5BC6\u7801\u5931\u8D25:",e),{success:!1,message:"\u66F4\u65B0\u7BA1\u7406\u5458\u5BC6\u7801\u5931\u8D25"};}}async function O(e){try{let s=await (0,q.request)("/api/admin/remove",{method:"POST",headers:{accept:"*/*"},params:{id:e}});if(s.success||200===s.code)return{success:!0,data:s.data};return{success:!1,code:s.code,message:s.message||"\u5220\u9664\u7BA1\u7406\u5458\u5931\u8D25"};}catch(e){return console.error("\u5220\u9664\u7BA1\u7406\u5458\u5931\u8D25:",e),{success:!1,message:e.message||"\u5220\u9664\u7BA1\u7406\u5458\u5931\u8D25"};}}let N=()=>{let[e,s]=(0,n.useState)(!1),[a,t]=(0,n.useState)(!1),[r,c]=(0,n.useState)(!1),[l,u]=(0,n.useState)(null),[m]=f.default.useForm(),[h]=f.default.useForm(),g=(0,n.useRef)(null),y=async e=>{s(!0);try{let s=await F(e);if(s.success)return{data:s.data.map(e=>({...e,password:"******"})),total:s.total||0,success:!0};return w.default.error(s.message||"\u83B7\u53D6\u7BA1\u7406\u5458\u5217\u8868\u5931\u8D25"),{data:[],total:0,success:!1};}catch(e){return console.error("\u83B7\u53D6\u7BA1\u7406\u5458\u5217\u8868\u5931\u8D25:",e),w.default.error("\u83B7\u53D6\u7BA1\u7406\u5458\u5217\u8868\u5931\u8D25"),{data:[],total:0,success:!1};}finally{s(!1);}},j=e=>{u(e),h.setFieldsValue({username:e.username,password:""}),c(!0);},T=()=>{g.current&&g.current.reload();},_=e=>{s(!0),O(e).then(e=>{e.success?(w.default.success("\u7BA1\u7406\u5458\u5220\u9664\u6210\u529F"),T()):w.default.error(e.message||"\u7BA1\u7406\u5458\u5220\u9664\u5931\u8D25");}).catch(e=>{console.error("\u7BA1\u7406\u5458\u5220\u9664\u5931\u8D25:",e),w.default.error("\u7BA1\u7406\u5458\u5220\u9664\u5931\u8D25");}).finally(()=>{s(!1);});},S=[{title:"\u8D26\u6237",dataIndex:"username",key:"username",width:200,sorter:!0,hideInSearch:!1},{title:"\u5BC6\u7801",dataIndex:"password",key:"password",width:200,hideInSearch:!0},{title:"\u64CD\u4F5C",valueType:"option",key:"action",width:150,render:(e,s)=>(0,d.jsxs)(x.default,{size:"middle",children:[(0,d.jsx)(o.default,{type:"link",icon:(0,d.jsx)(v.default,{}),onClick:()=>j(s),children:"\u7F16\u8F91"}),(0,d.jsx)(b.default,{title:"\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u7BA1\u7406\u5458\u5417\uFF1F",onConfirm:()=>_(s.id),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:(0,d.jsx)(o.default,{type:"link",danger:!0,icon:(0,d.jsx)(C.default,{}),disabled:"admin"===s.username,children:"\u5220\u9664"})})]})}];return(0,d.jsxs)("div",{className:"p-6",children:[(0,d.jsx)("div",{className:"mb-6",style:{marginBottom:"24px"},children:(0,d.jsx)("div",{className:"flex justify-between items-center",children:(0,d.jsx)(o.default,{type:"primary",icon:(0,d.jsx)(k.default,{}),onClick:()=>{m.resetFields(),t(!0);},children:"\u6DFB\u52A0\u7BA1\u7406\u5458"})})}),(0,d.jsx)(I.ProTable,{columns:S,actionRef:g,request:y,rowKey:"id",loading:e,pagination:{pageSize:10,showSizeChanger:!0,showTotal:(e,s)=>`\u{7B2C} ${s[0]}-${s[1]} \u{6761}\u{FF0C}\u{5171} ${e} \u{6761}`},search:{labelWidth:"auto"},options:{setting:{listsHeight:400}}}),(0,d.jsx)(i.default,{title:"\u6DFB\u52A0\u7BA1\u7406\u5458",open:a,onOk:()=>{m.validateFields().then(e=>{s(!0),P({username:e.username,passwd:e.password}).then(e=>{e.success?(t(!1),w.default.success("\u7BA1\u7406\u5458\u6DFB\u52A0\u6210\u529F"),T()):w.default.error(e.message||"\u7BA1\u7406\u5458\u6DFB\u52A0\u5931\u8D25");}).catch(e=>{console.error("\u7BA1\u7406\u5458\u6DFB\u52A0\u5931\u8D25:",e),w.default.error("\u7BA1\u7406\u5458\u6DFB\u52A0\u5931\u8D25");}).finally(()=>{s(!1);});});},onCancel:()=>t(!1),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",confirmLoading:e,children:(0,d.jsxs)(f.default,{form:m,layout:"vertical",initialValues:{username:"",password:""},children:[(0,d.jsx)(f.default.Item,{label:"\u8D26\u6237",name:"username",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u6237\u540D"},{min:3,message:"\u8D26\u6237\u540D\u957F\u5EA6\u81F3\u5C11\u4E3A3\u4E2A\u5B57\u7B26"}],children:(0,d.jsx)(p.default,{placeholder:"\u8BF7\u8F93\u5165\u8D26\u6237\u540D"})}),(0,d.jsx)(f.default.Item,{label:"\u5BC6\u7801",name:"password",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"},{min:6,message:"\u5BC6\u7801\u957F\u5EA6\u81F3\u5C11\u4E3A6\u4E2A\u5B57\u7B26"}],children:(0,d.jsx)(p.default.Password,{placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"})})]})}),(0,d.jsx)(i.default,{title:"\u7F16\u8F91\u7BA1\u7406\u5458",open:r,onOk:()=>{h.validateFields().then(e=>{l&&(s(!0),z(l.id,{passwd:e.password}).then(e=>{e.success?(c(!1),w.default.success("\u7BA1\u7406\u5458\u5BC6\u7801\u4FEE\u6539\u6210\u529F"),T()):w.default.error(e.message||"\u7BA1\u7406\u5458\u5BC6\u7801\u4FEE\u6539\u5931\u8D25");}).catch(e=>{console.error("\u7BA1\u7406\u5458\u5BC6\u7801\u4FEE\u6539\u5931\u8D25:",e),w.default.error("\u7BA1\u7406\u5458\u5BC6\u7801\u4FEE\u6539\u5931\u8D25");}).finally(()=>{s(!1);}));});},onCancel:()=>c(!1),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",confirmLoading:e,children:(0,d.jsxs)(f.default,{form:h,layout:"vertical",children:[(0,d.jsx)(f.default.Item,{label:"\u8D26\u6237",name:"username",children:(0,d.jsx)(p.default,{disabled:!0,placeholder:"\u8D26\u6237\u540D\u4E0D\u53EF\u4FEE\u6539"})}),(0,d.jsx)(f.default.Item,{label:"\u65B0\u5BC6\u7801",name:"password",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801"},{min:6,message:"\u5BC6\u7801\u957F\u5EA6\u81F3\u5C11\u4E3A6\u4E2A\u5B57\u7B26"}],children:(0,d.jsx)(p.default.Password,{placeholder:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801"})})]})})]});};}}]);
//# sourceMappingURL=685af5c1-async.ab1475ac.js.map